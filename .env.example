# Flowplane Environment Variables
# Copy to .env and customize for your environment

# =============================================================================
# DATABASE
# =============================================================================

# Database URL (SQLite for development, PostgreSQL for production)
FLOWPLANE_DATABASE_URL=sqlite://./data/flowplane.db
# FLOWPLANE_DATABASE_URL=postgresql://user:password@localhost:5432/flowplane

# Connection pool settings
FLOWPLANE_DATABASE_MAX_CONNECTIONS=10
FLOWPLANE_DATABASE_MIN_CONNECTIONS=0
FLOWPLANE_DATABASE_CONNECT_TIMEOUT_SECONDS=10
FLOWPLANE_DATABASE_IDLE_TIMEOUT_SECONDS=600

# Auto-run migrations on startup
FLOWPLANE_DATABASE_AUTO_MIGRATE=true

# =============================================================================
# API SERVER
# =============================================================================

# REST API server configuration
FLOWPLANE_API_PORT=8080
FLOWPLANE_API_BIND_ADDRESS=127.0.0.1

# CORS allowed origin (for UI)
FLOWPLANE_UI_ORIGIN=http://localhost:5173

# =============================================================================
# XDS SERVER
# =============================================================================

# gRPC xDS server configuration
FLOWPLANE_XDS_PORT=18000
FLOWPLANE_XDS_BIND_ADDRESS=0.0.0.0

# =============================================================================
# OBSERVABILITY
# =============================================================================

# Prometheus metrics
FLOWPLANE_ENABLE_METRICS=true
FLOWPLANE_METRICS_PORT=9090

# Distributed tracing
FLOWPLANE_ENABLE_TRACING=true
FLOWPLANE_OTLP_ENDPOINT=http://localhost:4317
FLOWPLANE_TRACE_SAMPLING_RATIO=1.0

# Service identification
FLOWPLANE_SERVICE_NAME=flowplane

# Logging
FLOWPLANE_LOG_LEVEL=info
FLOWPLANE_JSON_LOGGING=false
RUST_LOG=info,flowplane=debug

# =============================================================================
# TLS - XDS SERVER (Optional)
# =============================================================================

# Enable mTLS for xDS server
# FLOWPLANE_XDS_TLS_CERT_PATH=/path/to/server.pem
# FLOWPLANE_XDS_TLS_KEY_PATH=/path/to/server.key
# FLOWPLANE_XDS_TLS_CLIENT_CA_PATH=/path/to/ca.pem
# FLOWPLANE_XDS_TLS_REQUIRE_CLIENT_CERT=true

# =============================================================================
# TLS - API SERVER (Optional)
# =============================================================================

# Enable HTTPS for REST API
# FLOWPLANE_API_TLS_ENABLED=true
# FLOWPLANE_API_TLS_CERT_PATH=/path/to/api-cert.pem
# FLOWPLANE_API_TLS_KEY_PATH=/path/to/api-key.pem
# FLOWPLANE_API_TLS_CHAIN_PATH=/path/to/chain.pem

# =============================================================================
# SECRETS & VAULT (Optional)
# =============================================================================

# Bootstrap token for initial setup
# Generate with: openssl rand -base64 32
# FLOWPLANE_SECRET_BOOTSTRAP_TOKEN=your-secure-token-here

# HashiCorp Vault integration
# VAULT_ADDR=http://localhost:8200
# VAULT_TOKEN=your-vault-token
# VAULT_NAMESPACE=flowplane

# Vault PKI for mTLS certificates
# FLOWPLANE_VAULT_PKI_MOUNT_PATH=pki
# FLOWPLANE_VAULT_PKI_ROLE_NAME=flowplane-proxy
# FLOWPLANE_VAULT_PKI_TRUST_DOMAIN=flowplane.local

# =============================================================================
# ENVOY ADMIN (Bootstrap Generation)
# =============================================================================

# Envoy admin interface settings for generated bootstrap configs
FLOWPLANE_ENVOY_ADMIN_BIND_ADDRESS=127.0.0.1
FLOWPLANE_ENVOY_ADMIN_PORT=9901
FLOWPLANE_ENVOY_ADMIN_ACCESS_LOG_PATH=/dev/null
