name: mcp
display_name: MCP
description: Model Context Protocol filter for AI/LLM gateway traffic handling
version: "1.0"

envoy:
  http_filter_name: envoy.filters.http.mcp
  type_url: type.googleapis.com/envoy.extensions.filters.http.mcp.v3.Mcp
  per_route_type_url: type.googleapis.com/envoy.extensions.filters.http.mcp.v3.Mcp

capabilities:
  attachment_points:
    - route
    - listener
  requires_listener_config: true
  per_route_behavior: disable_only

is_implemented: true

config_schema:
  type: object
  properties:
    traffic_mode:
      type: string
      title: Traffic Mode
      description: How to handle non-MCP traffic. pass_through allows all traffic; reject_no_mcp rejects requests that don't follow MCP spec.
      enum:
        - pass_through
        - reject_no_mcp
      default: pass_through

per_route_config_schema:
  type: object
  properties:
    disabled:
      type: boolean
      default: false

ui_hints:
  form_layout: flat
  sections:
    - name: Configuration
      fields:
        - traffic_mode
      collapsible: false
      collapsed_by_default: false
